extends layout

block content
  div
    h1(class="mb-4 mt-3")= budget.name
  .row
    .col-12= budget.description
    .col-10= 'Available: ' + budget.available + '€'
    button.col-1(class='btn btn-primary btn-sm' data-target="#editBudgetModal" data-toggle="modal" )
      span(class='fas fa-pencil-alt')
    button.col-1(class='btn btn-danger btn-sm' onclick=`deleteBudgetLine("${budget._id}")`)
      span(class='fas fa-trash-alt')
    table.table(class='col-12 mt-2')
      thead
        tr
          th Expense
          th Amount
          th Date
      tbody
      each expense in budget.expenses
        tr
          td= expense.name
          td= expense.amount + ' €'
          td= expense.date

  div(id="editBudgetModal" class="modal fade")
    .modal-dialog
      .modal-content
        .modal-header
          h4.modal-title Edit
        .modal-body
          form(method="POST" action=`/budgets/${budget._id}`)
            .form-group
              label(for="budgetNameEdit") Name
              input.form-control(id="budgetNameEdit" name="name" type="text" value=`${budget.name}` aria-describedby="budgetNameEditHelp" required)
              small(id="budgetNameEditHelp" class="form-text text-muted") Budget line name must be unique
              label(for="budgetAmountEdit") Amount (€)
              input.form-control(id="budgetAmountEdit" name="amount" type="number" step="0.01" value=`${budget.amount}` aria-describedby="budgetAmountEditHelp" required)
              small(id="budgetAmountEditHelp" class="form-text text-muted") Budget line amount must be gretter than 0
              label(for="budgetDescEdit") Description
              textarea.form-control(id="budgetDescEdit" name="description")= budget.description
            .modal-footer
              button(type="button" class="btn btn-secondary" data-dismiss="modal") Cancel
              button(type="submit" class="btn btn-primary") Edit